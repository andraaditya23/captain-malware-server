FROM python:3.8

COPY . /tools

# Install build dependencies
RUN apt-get update && apt-get install -y \
    python3-dev \
    libyara-dev \
    inotify-tools \
 && apt-get clean \
 && rm -rf /var/lib/apt/lists/*

# Set the desired timezone
ENV TZ Asia/Jakarta

WORKDIR /tools

RUN pip3 install yara-python
RUN pip3 install --upgrade pip
RUN pip3 install -r requirements.txt

# Expose the desired port
EXPOSE 8080

# Make run.sh executable
RUN chmod +x ./run.sh
